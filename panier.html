<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panier - Nike Vintage</title>
    <style>
        /* Gardez vos styles CSS existants et ajoutez : */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
        }

        .modal-content {
            background: #111;
            color: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            margin: 50px auto;
            position: relative;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #333;
            background: #222;
            color: #fff;
        }

        .order-btn {
            background: #fff;
            color: #000;
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        .close {
            position: absolute;
            right: 10px;
            top: 10px;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Gardez votre navbar existante -->
    <div class="navbar">
        <!-- ... votre code navbar existant ... -->
    </div>

    <div class="cart-container">
        <h2>Mon Panier</h2>
        <div id="cart-items-container"></div>
        
        <div class="total-section">
            <div class="total-price">
                Total : <span id="total-price">0,00€</span>
            </div>
            <div class="shipping-info">
                Frais de port : <span id="shipping-price">0,00€</span>
                <br>
                <small>(6,50€ par article, offerts tous les 2 articles)</small>
            </div>
            <div class="total-with-shipping">
                Total avec frais de port : <span id="final-total">0,00€</span>
            </div>
            <button id="order-button" class="order-btn">Commander</button>
        </div>

        <!-- Modal de commande -->
        <div id="order-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Informations de livraison</h2>
                <form id="order-form">
                    <!-- ... formulaire ... -->
                </form>
            </div>
        </div>
    </div>

    <script>
        // Je vais vous donner le code JavaScript juste après
    </script>
</body>
</html>


    <script>
// Fonction pour charger les produits du panier depuis le localStorage
function loadCart() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let cartContainer = document.getElementById('cart-items-container');
    let totalPrice = 0;
    cartContainer.innerHTML = ''; // Réinitialiser le contenu

    // Si le panier est vide
    if (cart.length === 0) {
        cartContainer.innerHTML = '<p>Votre panier est vide.</p>';
        return;
    }

    // Calculer les frais de port
    const shippingCost = calculateShipping(cart.length);

    // Afficher les articles du panier
    cart.forEach((item, index) => {
        totalPrice += item.price;
        cartContainer.innerHTML += `
            <div class="cart-item">
                <img src="${item.image}" alt="${item.name}">
                <div class="cart-item-details">
                    <div class="cart-item-name">${item.name}</div>
                    <div class="cart-item-price">${item.price.toFixed(2)}€</div>
                </div>
                <button class="remove-button" onclick="removeFromCart(${index})">Supprimer</button>
            </div>
        `;
    });

    // Mettre à jour les totaux
    document.getElementById('total-price').innerText = totalPrice.toFixed(2) + '€';
    document.getElementById('shipping-price').innerText = shippingCost.toFixed(2) + '€';
    document.getElementById('final-total').innerText = (totalPrice + shippingCost).toFixed(2) + '€';
}

// Fonction pour calculer les frais de port
function calculateShipping(itemCount) {
    if (itemCount >= 2) return 0; // Gratuit pour 2 articles ou plus
    return itemCount * 6.50; // 6,50€ par article
}

// Fonction pour supprimer un produit du panier
function removeFromCart(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    loadCart();
}

// Fonction pour gérer la soumission du formulaire de commande
function handleOrderSubmit(event) {
    event.preventDefault();
    const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        address: document.getElementById('address').value,
        city: document.getElementById('city').value,
        postal: document.getElementById('postal').value,
        country: document.getElementById('country').value
    };

    // Envoyer les détails par email
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const total = calculateTotal(cart);
    const emailBody = `Nouvelle commande:\n${JSON.stringify(formData, null, 2)}`;
    
    // Rediriger vers PayPal
    window.location.href = 'https://www.paypal.me/Meslissahb/' + total.toFixed(2);
}

// Charger le panier au chargement de la page
window.onload = function() {
    loadCart();
    
    // Ajouter l'écouteur d'événements pour le formulaire
    const orderForm = document.getElementById('order-form');
    if (orderForm) {
        orderForm.addEventListener('submit', handleOrderSubmit);
    }
};
</script>


</body>
</html>
